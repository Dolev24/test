<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>הכתר שלך</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Using a Hebrew-friendly font */
        body {
            font-family: 'Assistant', sans-serif;
            scroll-behavior: smooth;
        }

        /* Base transition for all hoverable items */
        .hover-effect {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        /* Modified hover effect to only apply to the container, not the quantity controls */
        .hover-effect:hover:not(:has(.quantity-controls:hover)) {
            transform: translateY(-6px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1), 0 6px 6px rgba(0,0,0,0.12);
        }

        /* Add this class to prevent animation on quantity controls */
        .no-hover {
            transform: none !important;
            box-shadow: none !important;
        }

        /* Ensure cart popup has a high z-index */
        #cart-popup {
            z-index: 50;
        }

        /* Simple animation for cart popup */
        .cart-enter {
            animation: cart-enter-anim 0.4s ease-out;
        }
        @keyframes cart-enter-anim {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        /* Styles for the confirmation modal */
        .modal-overlay {
            z-index: 9998;
        }
        .modal-box {
            z-index: 9999;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- App Container -->
    <div id="app" class="min-h-screen flex flex-col">
        
        <!-- Header -->
        <header class="bg-white shadow-md sticky top-0 z-40">
            <nav class="container mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <!-- Logo -->
                    <a href="#" onclick="app.navigateTo('home')" class="text-5xl font-bold text-gray-900 w-1/4">הכתר שלך👑</a>
                    
                    <!-- Desktop Navigation - Now properly centered -->
                    <div class="hidden md:flex items-center justify-center w-2/4">
                        <div class="flex items-center space-x-8 space-x-reverse">
                            <a href="#" onclick="app.navigateTo('home')" class="text-2xl text-gray-600 hover:text-indigo-600 hover:font-bold transition-all duration-200">דף הבית</a>
                            <a href="#" onclick="app.navigateTo('store')" class="text-2xl text-gray-600 hover:text-indigo-600 hover:font-bold transition-all duration-200">חנות</a>
                            <a href="#" onclick="app.navigateTo('about')" class="text-2xl text-gray-600 hover:text-indigo-600 hover:font-bold transition-all duration-200">אודות</a>
                            <a href="#" onclick="app.navigateTo('contact')" class="text-2xl text-gray-600 hover:text-indigo-600 hover:font-bold transition-all duration-200">צור קשר</a>
                        </div>
                    </div>

                    <!-- Search and Cart -->
                    <div class="flex items-center space-x-4 space-x-reverse w-1/4 justify-end">
                        <div class="relative hidden sm:block">
                            <input id="search-input" type="text" placeholder="חיפוש מוצרים..." class="border rounded-full py-2 px-40 pr-10 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <svg class="w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </div>
                        <div class="relative">
                            <button id="cart-button" class="relative text-gray-600 hover:text-indigo-600 transition-colors duration-200">
                                <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                                </svg>
                                <span id="cart-count" class="absolute -top-2 -right-2 bg-indigo-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                            </button>
                        </div>
                    </div>

                     <!-- Mobile Menu Button -->
                    <div class="md:hidden">
                        <button id="mobile-menu-button" class="text-gray-600 hover:text-indigo-600 focus:outline-none">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                        </button>
                    </div>
                </div>
            </nav>
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden bg-white py-2">
                <a href="#" onclick="app.navigateTo('home')" class="block px-4 py-2 text-sm text-gray-600 hover:bg-indigo-50">דף הבית</a>
                <a href="#" onclick="app.navigateTo('store')" class="block px-4 py-2 text-sm text-gray-600 hover:bg-indigo-50">חנות</a>
                <a href="#" onclick="app.navigateTo('about')" class="block px-4 py-2 text-sm text-gray-600 hover:bg-indigo-50">אודות</a>
                <a href="#" onclick="app.navigateTo('contact')" class="block px-4 py-2 text-sm text-gray-600 hover:bg-indigo-50">צור קשר</a>
                <div class="px-4 pt-2">
                     <input id="mobile-search-input" type="text" placeholder="חיפוש מוצרים..." class="w-full border rounded-full py-2 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
            </div>
        </header>

        <!-- Cart Popup -->
        <div id="cart-popup" class="hidden fixed top-20 left-0 ml-4 mt-2 w-80 bg-white rounded-lg shadow-xl border cart-enter">
            <div id="cart-content" class="p-4 max-h-96 overflow-y-auto">
                <p class="text-center text-gray-500">סל הקניות שלך ריק.</p>
            </div>
            <div class="border-t p-4">
                <div class="flex justify-between items-center font-bold text-lg">
                    <span>סה"כ:</span>
                    <span id="cart-total">₪0.00</span>
                </div>
                <button class="w-full bg-indigo-600 text-white rounded-md py-2 mt-4 hover:bg-indigo-700 transition-colors duration-200">לקופה</button>
                <button id="close-cart-button" class="w-full bg-gray-200 text-gray-700 rounded-md py-2 mt-2 hover:bg-gray-300 transition-colors duration-200">סגור</button>
            </div>
        </div>

        <!-- Main Content (Page will be rendered here) -->
        <main id="main-content" class="flex-grow container mx-auto p-6"></main>

        <!-- Footer -->
        <footer class="bg-white border-t mt-12">
            <div class="container mx-auto px-6 py-8 text-center text-gray-500">
                <p>&copy; 2025 החנות שלי. כל הזכויות שמורות.</p>
                <p class="mt-2">אתר זה הוא דוגמה שנבנתה למטרה ייצוגית.</p>
            </div>
        </footer>

    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center modal-overlay">
        <div class="bg-white rounded-lg p-8 shadow-xl modal-box text-center">
            <p id="modal-message" class="text-lg font-semibold mb-6">Are you sure?</p>
            <div class="flex justify-center space-x-4 space-x-reverse">
                <button id="confirm-button" class="bg-red-600 text-white px-6 py-2 rounded-md hover:bg-red-700">אישור</button>
                <button id="cancel-button" class="bg-gray-300 text-gray-800 px-6 py-2 rounded-md hover:bg-gray-400">ביטול</button>
            </div>
        </div>
    </div>

    <script>
        const app = {
            // --- STATE ---
            currentPage: 'home',
            products: [
                { id: 1, name: 'חולצת טי-שירט', price: 99.90, image: 'https://placehold.co/400x400/f1f5f9/334155?text=T-Shirt' },
                { id: 2, name: 'ג\'ינס קלאסי', price: 249.90, image: 'https://placehold.co/400x400/e2e8f0/334155?text=Jeans' },
                { id: 3, name: 'שמלת קיץ', price: 199.50, image: 'https://placehold.co/400x400/f8fafc/334155?text=Dress' },
                { id: 4, name: 'ז\'קט עור', price: 450.00, image: 'https://placehold.co/400x400/e2e8f0/334155?text=Jacket' },
                { id: 5, name: 'סוודר צמר', price: 180.00, image: 'https://placehold.co/400x400/f1f5f9/334155?text=Sweater' },
                { id: 6, name: 'כובע בייסבול', price: 79.00, image: 'https://placehold.co/400x400/f8fafc/334155?text=Cap' },
                { id: 7, name: 'מכנסיים קצרים', price: 120.00, image: 'https://placehold.co/400x400/e2e8f0/334155?text=Shorts' },
                { id: 8, name: 'נעלי ספורט', price: 320.00, image: 'https://placehold.co/400x400/f1f5f9/334155?text=Shoes' },
            ],
            cart: [],
            searchTerm: '',
            confirmCallback: null,

            // --- UI ELEMENTS ---
            init() {
                this.mainContent = document.getElementById('main-content');
                this.searchInput = document.getElementById('search-input');
                this.mobileSearchInput = document.getElementById('mobile-search-input');
                this.cartCount = document.getElementById('cart-count');
                this.cartButton = document.getElementById('cart-button');
                this.cartPopup = document.getElementById('cart-popup');
                this.closeCartButton = document.getElementById('close-cart-button');
                this.mobileMenuButton = document.getElementById('mobile-menu-button');
                this.mobileMenu = document.getElementById('mobile-menu');

                // Confirmation Modal elements
                this.confirmationModal = document.getElementById('confirmation-modal');
                this.modalMessage = document.getElementById('modal-message');
                this.confirmButton = document.getElementById('confirm-button');
                this.cancelButton = document.getElementById('cancel-button');


                this.addEventListeners();
                this.render();
            },

            // --- EVENT LISTENERS ---
            addEventListeners() {
                // Search
                this.searchInput.addEventListener('input', (e) => this.handleSearch(e.target.value));
                this.mobileSearchInput.addEventListener('input', (e) => this.handleSearch(e.target.value));

                // Cart
                this.cartButton.addEventListener('click', (e) => {
                    e.stopPropagation(); // prevent closing immediately
                    this.toggleCart();
                });
                this.closeCartButton.addEventListener('click', () => this.toggleCart(false));
                
                // Mobile Menu
                this.mobileMenuButton.addEventListener('click', () => {
                    this.mobileMenu.classList.toggle('hidden');
                });

                // Close cart on outside click
                document.addEventListener('click', (e) => {
                    const isCartOpen = !this.cartPopup.classList.contains('hidden');
                    const isClickInsideCart = this.cartPopup.contains(e.target);
                    const isClickOnCartButton = this.cartButton.contains(e.target);
                    
                    if (isCartOpen && !isClickInsideCart && !isClickOnCartButton) {
                        this.toggleCart(false);
                    }
                });

                // Modal listeners
                this.confirmButton.addEventListener('click', () => {
                    if (this.confirmCallback) {
                        this.confirmCallback();
                    }
                    this.hideConfirmation();
                });
                this.cancelButton.addEventListener('click', () => this.hideConfirmation());
            },

            // --- CORE LOGIC ---
            showConfirmation(message, callback) {
                this.modalMessage.textContent = message;
                this.confirmCallback = callback;
                this.confirmationModal.classList.remove('hidden');
            },

            hideConfirmation() {
                this.confirmationModal.classList.add('hidden');
                this.confirmCallback = null;
            },

            handleSearch(term) {
                this.searchTerm = term.toLowerCase();
                if (this.currentPage !== 'store') {
                    this.navigateTo('store');
                } else {
                    this.render();
                }
            },
            
            navigateTo(page) {
                this.currentPage = page;
                this.render();
                window.scrollTo(0, 0); // Scroll to top on page change
                // Close mobile menu on navigation
                if (!this.mobileMenu.classList.contains('hidden')) {
                    this.mobileMenu.classList.add('hidden');
                }
            },

            addToCart(productId) {
                const product = this.products.find(p => p.id === productId);
                const existingItem = this.cart.find(item => item.id === productId);
                
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    this.cart.push({
                        ...product,
                        quantity: 1
                    });
                }
                
                this.updateCartUI();
                this.render(); // This will update the main page
            },
            
            removeFromCart(productId) {
                this.cart = this.cart.filter(item => item.id !== productId);
                this.render(); // Re-render to update buttons and cart
            },

            increaseCartItem(productId) {
                const item = this.cart.find(item => item.id === productId);
                if (item) {
                    item.quantity++;
                    this.updateCartUI();
                    this.render(); // This will update the main page
                }
            },
            
            decreaseCartItem(productId) {
                const item = this.cart.find(item => item.id === productId);
                if (item) {
                    if (item.quantity > 1) {
                        item.quantity--;
                    } else {
                        // Directly remove item without confirmation when quantity reaches 0
                        this.cart = this.cart.filter(item => item.id !== productId);
                    }
                    this.updateCartUI();
                    this.render(); // This will update the main page
                }
            },

            toggleCart(forceState) {
                if (forceState === true) {
                    this.cartPopup.classList.remove('hidden');
                } else if (forceState === false) {
                    this.cartPopup.classList.add('hidden');
                } else {
                    this.cartPopup.classList.toggle('hidden');
                }
            },

            // --- UI UPDATES ---
            updateCartUI() {
                // Update cart count badge
                const totalItems = this.cart.reduce((sum, item) => sum + item.quantity, 0);
                this.cartCount.textContent = totalItems;

                // Update cart popup content
                const cartContent = document.getElementById('cart-content');
                const cartTotalEl = document.getElementById('cart-total');

                if (this.cart.length === 0) {
                    cartContent.innerHTML = '<p class="text-center text-gray-500">סל הקניות שלך ריק.</p>';
                    cartTotalEl.textContent = '₪0.00';
                    return;
                }

                cartContent.innerHTML = this.cart.map(item => `
                    <div class="flex items-center mb-4">
                        <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded-md">
                        <div class="flex-grow pr-3">
                            <p class="font-semibold">${item.name}</p>
                            <div class="flex items-center text-sm text-gray-600 mt-1">
                                <button onclick="event.stopPropagation(); app.decreaseCartItem(${item.id})" class="w-6 h-6 rounded-full border flex items-center justify-center hover:bg-gray-100">-</button>
                                <span class="mx-3">${item.quantity}</span>
                                <button onclick="event.stopPropagation(); app.increaseCartItem(${item.id})" class="w-6 h-6 rounded-full border flex items-center justify-center hover:bg-gray-100">+</button>
                            </div>
                        </div>
                        <div class="text-right">
                           <p class="font-semibold">₪${(item.price * item.quantity).toFixed(2)}</p>
                           <button onclick="event.stopPropagation(); app.showConfirmation('האם להסיר את המוצר מהסל?', () => app.removeFromCart(${item.id}))" class="text-red-500 hover:text-red-700 text-xs mt-1">הסר</button>
                        </div>
                    </div>
                `).join('');

                const total = this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                cartTotalEl.textContent = `₪${total.toFixed(2)}`;
            },

            // --- RENDERING ---
            render() {
                switch (this.currentPage) {
                    case 'home':
                        this.renderHomePage();
                        break;
                    case 'store':
                        this.renderStorePage();
                        break;
                    case 'about':
                        this.renderAboutPage();
                        break;
                    case 'contact':
                        this.renderContactPage();
                        break;
                }
                this.updateCartUI();
            },

            renderHomePage() {
                this.mainContent.innerHTML = `
                    <div class="text-center">
                        <div class="bg-indigo-600 text-white py-20 rounded-lg shadow-lg">
                            <h1 class="text-5xl font-bold mb-4">הקולקציה החדשה כבר כאן</h1>
                            <p class="text-xl mb-8">גלו את הסטייל החדש שלכם לעונה הקרובה.</p>
                            <button onclick="app.navigateTo('store')" class="bg-white text-indigo-600 font-bold py-3 px-8 rounded-full hover-effect">לרכישה</button>
                        </div>
                        <h2 class="text-3xl font-bold my-12">מוצרים נבחרים</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                           ${this.products.slice(0, 4).map(p => this.renderProductCard(p)).join('')}
                        </div>
                    </div>
                `;
            },
            
            renderStorePage() {
                const filteredProducts = this.products.filter(p => 
                    p.name.toLowerCase().includes(this.searchTerm)
                );
                this.mainContent.innerHTML = `
                    <h1 class="text-4xl font-bold mb-8 text-center">כל המוצרים</h1>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                       ${filteredProducts.length > 0 ? filteredProducts.map(p => this.renderProductCard(p)).join('') : '<p class="col-span-full text-center text-gray-500">לא נמצאו מוצרים התואמים לחיפוש שלך.</p>'}
                    </div>
                `;
            },

            renderAboutPage() {
                this.mainContent.innerHTML = `
                    <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-md">
                        <h1 class="text-4xl font-bold mb-6 text-center">אודותינו</h1>
                        <p class="text-lg leading-relaxed text-gray-700 mb-4">
                            ברוכים הבאים לחנות שלי, המקום שלכם לאופנה עכשווית ואיכותית. אנחנו מאמינים שלבוש הוא יותר מסתם בגד - הוא דרך לבטא את עצמך, להרגיש בטוח וליצור רושם.
                        </p>
                        <p class="text-lg leading-relaxed text-gray-700 mb-4">
                            הסיפור שלנו התחיל מתשוקה פשוטה לאופנה ולסטייל. רצינו ליצור מקום שבו כל אחד ואחת יוכלו למצוא פריטים שמדברים אליהם, באיכות בלתי מתפשרת ובמחירים הוגנים. אנחנו בוחרים בקפידה כל פריט בקולקציה שלנו, תוך שימת דגש על עיצובים מודרניים, בדים נעימים וגזרות שמחמיאות לכל מבנה גוף.
                        </p>
                        <p class="text-lg leading-relaxed text-gray-700">
                            תודה שבחרתם בנו. אנחנו כאן כדי לעזור לכם למצוא את המראה המושלם שלכם.
                        </p>
                    </div>
                `;
            },

            renderContactPage() {
                this.mainContent.innerHTML = `
                    <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-md">
                        <h1 class="text-4xl font-bold mb-6 text-center">צור קשר</h1>
                        <form class="space-y-6">
                            <div>
                                <label for="name" class="block text-sm font-medium text-gray-700">שם מלא</label>
                                <input type="text" id="name" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700">כתובת אימייל</label>
                                <input type="email" id="email" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                            <div>
                                <label for="message" class="block text-sm font-medium text-gray-700">הודעה</label>
                                <textarea id="message" rows="4" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                            </div>
                            <div>
                                <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">שלח</button>
                            </div>
                        </form>
                    </div>
                `;
            },

            renderProductCard(product) {
                const itemInCart = this.cart.find(item => item.id === product.id);
                const buttonHtml = itemInCart 
                    ? `<div class="flex justify-center items-center space-x-2 space-x-reverse w-full quantity-controls">
                         <button onclick="event.stopPropagation(); app.decreaseCartItem(${product.id})" 
                                 class="text-xl w-10 h-10 flex items-center justify-center rounded-md bg-red-50 hover:bg-red-100 no-hover">
                            -
                         </button>
                         <span class="text-lg px-4">
                            ${itemInCart.quantity}
                         </span>
                         <button onclick="event.stopPropagation(); app.increaseCartItem(${product.id})" 
                                 class="text-xl w-10 h-10 flex items-center justify-center rounded-md bg-green-50 hover:bg-green-100 no-hover">
                            +
                         </button>
                       </div>`
                    : `<button onclick="app.addToCart(${product.id})" 
                              class="w-full bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700 transition-colors">
                         הוסף לסל
                       </button>`;

                return `
                    <div class="bg-white rounded-lg shadow-md overflow-hidden hover-effect">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="text-lg font-semibold text-center">${product.name}</h3>
                            <p class="text-gray-600 mt-1 text-center">₪${product.price.toFixed(2)}</p>
                            <div class="mt-4">
                                ${buttonHtml}
                            </div>
                        </div>
                    </div>
                `;
            }
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
    </script>
</body>
</html>

